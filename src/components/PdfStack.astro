---
export interface Props {
  src: string;
  class?: string;
  ariaLabel?: string;
}

const { src, class: className = "", ariaLabel = "Embedded PDF document" } = Astro.props;

// This makes Vite bundle the module so bare imports like "pdfjs-dist/..." work
import pdfstackUrl from "../scripts/pdfstack.client.js?url";
---

<div
  class={`pdfStack ${className}`}
  data-pdf-stack
  data-pdf-src={src}
  aria-label={ariaLabel}
></div>

<script type="module" src={pdfstackUrl}></script>

<style>
  .pdfStack {
    width: 100%;
  }

  .pdfPage {
    width: 100%;
    margin: 0 0 1rem 0;
  }

  .pdfPage canvas {
    display: block;
    width: 100%;
    height: auto;
  }

  .pdfError {
    color: var(--muted);
    font-size: var(--font-size-sm);
  }
</style>
